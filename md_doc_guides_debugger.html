<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mruby: How to Use the mruby Debugger</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mruby_logo_red_icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mruby
   &#160;<span id="projectnumber">2.0.1</span>
   </div>
   <div id="projectbrief">mruby is the lightweight implementation of the Ruby language</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How to Use the mruby Debugger </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>copyright (c) 2014 Specified Non-Profit Corporation mruby Forum</p>
<h2>1. Summary</h2>
<p>This file documents the mruby debugger ('mrdb') methods.</p>
<h2>2 Debugging with mrdb</h2>
<h2>2.1 Building mrdb</h2>
<p>The trunk of the mruby source tree, with the most recent mrdb, can be checked out with the following command:</p>
<div class="fragment"><div class="line">$ git clone https://github.com/mruby/mruby.git</div></div><!-- fragment --><p>To run the <code>make</code> command:</p>
<div class="fragment"><div class="line">$ cd mruby</div><div class="line">$ make</div></div><!-- fragment --><p>By default, the <code>make</code> command will install the debugger files into mruby/bin.</p>
<p>You can add the path for mrdb on your host environment with the following command:</p>
<div class="fragment"><div class="line">$ echo &quot;export PATH=\$PATH:MRUBY_ROOT/bin&quot; &gt;&gt; ~/.bashrc</div><div class="line">$ source ~/.bashrc</div></div><!-- fragment --><p><code>*MRUBY_ROOT</code> is the directory in which mruby source code will be installed.</p>
<p>To confirm mrdb was installed properly, run mrdb with the <code>--version</code> option:</p>
<div class="fragment"><div class="line">$ mrdb --version</div><div class="line">mruby 2.0.1 (2019-4-4)</div></div><!-- fragment --><h2>2.2 Basic Operation</h2>
<h3>2.2.1 Debugging mruby Script Files (rb file) with mrdb</h3>
<p>To invoke the mruby debugger, just type <code>mrdb</code>.</p>
<p>To specify the script file:</p>
<div class="fragment"><div class="line">$ mrdb [option] file name</div></div><!-- fragment --><p>For example: Debugging sample.rb</p>
<div class="fragment"><div class="line">$ mrdb sample.rb</div></div><!-- fragment --><p>You can execute the shell commands listed below:</p>
<table class="doxtable">
<tr>
<th align="center">command</th><th align="left">description  </th></tr>
<tr>
<td align="center">run</td><td align="left">execute programs </td></tr>
<tr>
<td align="center">step</td><td align="left">execute stepping </td></tr>
<tr>
<td align="center">continue</td><td align="left">execute continuing program </td></tr>
<tr>
<td align="center">break</td><td align="left">configure the breaking point </td></tr>
<tr>
<td align="center">delete</td><td align="left">deleting the breaking points </td></tr>
<tr>
<td align="center">disable</td><td align="left">disabling the breaking points </td></tr>
<tr>
<td align="center">enable</td><td align="left">enabling the breaking points </td></tr>
<tr>
<td align="center">info breakpoints</td><td align="left">showing list of the breaking points </td></tr>
<tr>
<td align="center">print</td><td align="left">evaluating and printing the values of the mruby expressions in the script </td></tr>
<tr>
<td align="center">list</td><td align="left">displaying the source cords </td></tr>
<tr>
<td align="center">help</td><td align="left">showing help </td></tr>
<tr>
<td align="center">quit</td><td align="left">terminating the mruby debugger </td></tr>
</table>
<h3>2.2.2 Debugging mruby Binary Files (mrb file) with mrdb</h3>
<p>You can debug the mruby binary files.</p>
<h4>2.2.2.1 Debugging the binary files</h4>
<ul>
<li>notice To debug mruby binary files, you need to compile mruby files with option <code>-g</code>.</li>
</ul>
<div class="fragment"><div class="line">$ mrbc -g sample.rb</div></div><!-- fragment --><p>You can debug the mruby binary files with following command and the option <code>-b</code>.</p>
<div class="fragment"><div class="line">$ mrdb -b sample.mrb</div></div><!-- fragment --><p>Then you can execute all debugger shell commands.</p>
<h4>Break Command</h4>
<p>You can use any breakpoint to stop the program by specifying the line number and method name. The breakpoint list will be displayed after you have set the breakpoint successfully.</p>
<p>Usage:</p>
<div class="fragment"><div class="line">break [file:]linenum</div><div class="line">b [file:]linenum</div><div class="line">break [class:]method</div><div class="line">b [class:]method</div></div><!-- fragment --><p>The breakpoint will be ordered in serial from 1. The number, which was given to the deleted breakpoint, will never be given to another breakpoint again.</p>
<p>You can give multiple breakpoints to specified the line number and method. Be ware that breakpoint command will not check the validity of the class name and method name.</p>
<p>You can get the current breakpoint information by the following options.</p>
<p>breakpoint breakpoint number : file name. line number</p>
<p>breakpoint breakpoint number : [class name,] method name</p>
<h4>Continue Command</h4>
<p>Usage:</p>
<div class="fragment"><div class="line">continue [N]</div><div class="line">c [N]</div></div><!-- fragment --><p>N: the next breakpoint number</p>
<p>When resuming the program, it will stop at breakpoint N (N-1 breakpoint will be ignored).</p>
<p>When you run the <code>continue</code> command without specifying N, the program will be stopped at the next breakpoint.</p>
<p>Example:</p>
<div class="fragment"><div class="line">(foo.rb:1) continue 3</div></div><!-- fragment --><p>This will resume the program and stop it at the third breakpoint.</p>
<h4>Delete Command</h4>
<p>This will delete the specified breakpoint.</p>
<p>Usage:</p>
<div class="fragment"><div class="line">delete [breakpoint-no]</div><div class="line">d [breakpoint-no]</div></div><!-- fragment --><p>breakpoint-no: breakpoint number</p>
<p>Example:</p>
<div class="fragment"><div class="line">(foo.rb:1) delete</div></div><!-- fragment --><p>This will delete all of the breakpoints.</p>
<div class="fragment"><div class="line">(foo.rb:1) delete 1 3</div></div><!-- fragment --><p>This will delete the breakpoint at 1 and 3.</p>
<h4>Disable Command</h4>
<p>This will disable the specified breakpoint.</p>
<p>Usage:</p>
<div class="fragment"><div class="line">disable [breakpoint-no]</div><div class="line">dis [breakpoint-no]</div></div><!-- fragment --><p>reappointing: breakpoint number</p>
<p>Example:</p>
<div class="fragment"><div class="line">(foo.rb:1) disable</div></div><!-- fragment --><p>Use <code>disable</code> if you would like to disable all of the breakpoints.</p>
<div class="fragment"><div class="line">(foo.rb:1) disable 1 3</div></div><!-- fragment --><p>This will disable the breakpoints at 1 and 3.</p>
<h4>Enable Command</h4>
<p>This will enable the specified breakpoints.</p>
<p>Usage:</p>
<div class="fragment"><div class="line">enable [breakpoint-no]</div><div class="line">e [breakpoint-no]</div></div><!-- fragment --><p>breakpoint-no: breakpoint number</p>
<p>Example:</p>
<div class="fragment"><div class="line">(foo.rb:1) enable</div></div><!-- fragment --><p>Enabling all breakpoints </p><div class="fragment"><div class="line">(foo.rb:1) enable 1 3</div></div><!-- fragment --><p>Enabling the breakpoint 1 and 3</p>
<h4>eval command</h4>
<p>Evaluating the string as source code and printing the value.</p>
<p>Same as print command, please see print command.</p>
<h4>help command</h4>
<p>Displaying the help message.</p>
<p>Usage:</p>
<div class="fragment"><div class="line">help [command]</div><div class="line">h [command]</div></div><!-- fragment --><p>Typing <code>help</code> without any options will display the command list.</p>
<h4>Info Breakpoints Command</h4>
<p>Displaying the specified breakpoint information.</p>
<p>Usage:</p>
<div class="fragment"><div class="line">info breakpoints [breakpoint-no]</div><div class="line">i b [breakpoint-no]</div></div><!-- fragment --><p>breakpoint-no: breakpoint number</p>
<p>Typing "info breakpoints" without ant option will display all breakpoint information. Example:</p>
<div class="fragment"><div class="line">(sample.rb:1) info breakpoints</div><div class="line">Num     Type           Enb What  </div><div class="line">1       breakpoint     y   at sample.rb:3                      -&gt; file name,line number</div><div class="line">2       breakpoint     n   in Sample_class:sample_class_method -&gt; [class:]method name</div><div class="line">3       breakpoint     y   in sample_global_method</div></div><!-- fragment --><p>Displaying the specified breakpoint number:</p>
<div class="fragment"><div class="line">(foo.rb:1) info breakpoints 1 3</div><div class="line">Num     Type           Enb What  </div><div class="line">1       breakpoint     y   at sample.rb:3  </div><div class="line">3       breakpoint     y   in sample_global_method</div></div><!-- fragment --><h4>List Command</h4>
<p>To display the code of the source file.</p>
<p>Usage:</p>
<div class="fragment"><div class="line">list [filename:]first[,last]</div><div class="line">l [filename]:first[,last]</div></div><!-- fragment --><p>first: the opening row number last : the closing row number</p>
<p>When you specify the <code>first</code>, but not the <code>last</code> option, you will receive 10 rows. When you do not specify both the <code>first</code> and <code>last</code> options, you will receive the next 10 rows.</p>
<p>Example:</p>
<div class="fragment"><div class="line">Specifying file name and first row number</div><div class="line">sample.rb:1) list sample2.rb:5</div></div><!-- fragment --><p>Specifying the file name and the first and last row number:</p>
<div class="fragment"><div class="line">(sample.rb:1) list sample2.rb:6,7</div></div><!-- fragment --><h4>Print Command</h4>
<p>Evaluating the string as source code and printing the value.</p>
<p>Usage:</p>
<div class="fragment"><div class="line">print [expr]</div><div class="line">p [expr]</div></div><!-- fragment --><p>expr: expression</p>
<p>The expression is mandatory. The displayed expressions will be serially ordered from 1. If an exception occurs, the exception information will be displayed and the debugging will be continued.</p>
<p>Example:</p>
<div class="fragment"><div class="line">(sample.rb:1) print 1+2</div><div class="line">$1 = 3</div><div class="line">(sample.rb:1) print self</div><div class="line">$2 = main</div></div><!-- fragment --><p>Below is the case of the exception:</p>
<div class="fragment"><div class="line">(sample.rb:1) print (1+2</div><div class="line">$1 =  SyntaxError: line 1: syntax error, unexpected $end, expecting &#39;)&#39;</div></div><!-- fragment --><h4>Quit Command</h4>
<p>Quitting the debugger.</p>
<p>Usage:</p>
<div class="fragment"><div class="line">quit</div><div class="line">q</div></div><!-- fragment --><h4>Run Command</h4>
<p>Running the program and stopping at the first breakpoint.</p>
<p>Usage:</p>
<div class="fragment"><div class="line">run</div><div class="line">r</div></div><!-- fragment --><h4>Step Command</h4>
<p>This will run the program step by step. When the method and the block are invoked, the program will be stop at the first row. The program, which is developed in C, will be ignored. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
